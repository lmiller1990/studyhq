const o=new Set;function a(e){if(window.ws)return;const t=(location.protocol==="https:"?"wss://":"ws://")+location.host+"/_ws";console.log("Connecting to",t,"...");const c=new WebSocket(t);return c.addEventListener("open",()=>{console.log(`WebSocket ${e.name} opened`)}),c.addEventListener("close",()=>{console.log(`WebSocket ${e.name} closed`)}),c.addEventListener("message",s=>{for(const n of o)n(JSON.parse(s.data))}),c}function r(e){if(!window.ws)throw Error("No luck!");o.add(e),console.log(`Total callbacks: ${o.size}`)}function i(e){o.delete(e),console.log(`Total callbacks: ${o.size}`)}export{i as a,a as c,r};
